<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Java Runner</title>

<style>
body{
    font-family: Arial;
    text-align:center;
    margin-top:80px;
    background:#f2f2f2;
}
button{
    display:block;
    margin:15px auto;
    padding:14px 28px;
    font-size:18px;
    background:green;
    color:white;
    border:none;
    border-radius:8px;
    cursor:pointer;
}
pre{
    background:white;
    padding:15px;
    width:60%;
    margin:auto;
    border-radius:8px;
}
</style>
</head>

<body>

<h1>Available Java Programs</h1>
<div id="programs"></div>
<div id="status">Loading programs...</div>

<script>

const API = "https://YOUR-WORKER-URL.workers.dev";

async function loadPrograms(){

    const res = await fetch(API + "/files");
    const files = await res.json();

    const container = document.getElementById("programs");
    const status = document.getElementById("status");

    status.innerHTML = "";

    files.forEach(file => {

        const btn = document.createElement("button");
        btn.innerText = "Run " + file;

        btn.onclick = async () => {

            status.innerHTML = "Running " + file + "... please wait";

            await fetch(API + "/run", {
                method:"POST",
                headers:{"Content-Type":"application/json"},
                body: JSON.stringify({ filename:file })
            });

            // wait for GitHub runner
            await new Promise(r => setTimeout(r, 18000));

            const out = await fetch(API + "/result");
            const text = await out.text();

            status.innerHTML =
                "<h3>Program Output:</h3><pre>"+text+"</pre>";
        };

        container.appendChild(btn);
    });
}

loadPrograms();

</script>
</body>
</html>
